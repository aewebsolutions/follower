;(function(c){function d(f,n){this.el=f instanceof c?f:c(f);if(this.el.length===0){return}this.parent;this.minTop;this.maxTop;this.height;this.originalTop=null;this.originalLeft=null;this.following=false;var h={center:false,padding:0,breakpoint:900,height:""};this.settings=c.extend(true,{},h,n);var m=this,i=c("body"),e=c(window);var l=function(){m.parent=m.el.offsetParent();g();if(e.width()<m.settings.breakpoint){m.following=true}k();m.update();e.on("resize",j);m.el.trigger("followerReady",m)};var g=function(){var o=m.el[0].style.position;var p=m.el.css("position");if(p!=="absolute"){m.el.css("position","absolute");m.originalTop=parseInt(m.el.css("top"))||0;m.originalLeft=parseInt(m.el.css("left"))||0;m.el[0].style.position=o?o:""}else{m.originalTop=parseInt(m.el.css("top"))||0;m.originalLeft=parseInt(m.el.css("left"))||0}};var j=function(){if(m.el.data("resizefollower")){clearTimeout(m.el.data("resizefollower"))}var o=setTimeout(function(){m.update();m.el.removeData("resizefollower")},300);m.el.data("resizefollower",o)};var k=function(){m.el.addClass("follower");if(m.settings.center){m.el.addClass("follower-center-content")}m.el.wrapInner('<div class="follower-content"></div>').wrapInner('<div class="follower-content-wr"></div>');if(m.settings.scroll){m.el.addClass("follower-scroll")}};this.update=function(){if(e.width()<m.settings.breakpoint){if(m.following===true){m.stop()}return false}else{if(m.following===false){m.play()}}m.setSize();m.setPosition()};this.close=function(o){e.off("scroll",m.setPosition);m.el.detach();if(typeof o==="function"){o()}};this.stop=function(){m.following=false;e.off("scroll",m.setPosition);m.el.removeClass("fixed").addClass("not-following");m.el.attr("style","");m.el.trigger("followerStop",m)};this.play=function(){m.following=true;m.el.removeClass("not-following");m.setSize();m.setPosition();e.on("scroll",m.setPosition);m.el.trigger("followerPlay",m)};this.setPosition=function(){var o=i.scrollTop();if(o>m.maxTop){if(m.el.hasClass("fixed")){m.el.trigger("followerGetBottom")}m.el.removeClass("fixed");m.el.css({position:"absolute",top:m.maxTop-m.parent.offset().top+m.settings.padding,left:m.originalLeft})}else{if(o>m.minTop){if(!m.el.hasClass("fixed")){m.el.addClass("fixed");m.el.css({position:"fixed",top:m.settings.padding,left:m.originalLeft+m.parent.offset().left+parseInt(m.parent.css("border-left-width"))})}}else{if(o<=m.minTop){if(m.el.hasClass("fixed")){m.el.trigger("followerGetTop")}m.el.removeClass("fixed");m.el.css({position:"absolute",top:m.originalTop,left:m.originalLeft})}}}};this.setSize=function(){var w=m.parent.outerHeight(),t=m.parent.offset().top,r=e.height(),o=m.el.find(".follower-content").outerHeight();m.minTop=t+m.originalTop-m.settings.padding+parseInt(m.parent.css("border-top-width"));var p=c.trim(m.settings.height);var s=parseInt(p);if(p!==""&&s){var q=p.substr(p.length-1)==="%";if(q){var u=r-m.settings.padding;var v=u*s/100;m.height=(v<w)?v:w;if(m.height-o<0&&!m.settings.scroll){m.height=o}}else{m.height=p}}else{m.height=m.el.height()}m.maxTop=w+t-m.el.height()-m.originalTop-m.settings.padding-parseInt(m.parent.css("border-top-width"))-parseInt(m.parent.css("border-bottom-width"));m.el.height(m.height);m.el.trigger("followerResize")};l()}var b="follower";var a=d;c.fn[b]=function(g){var f=arguments;if(g===undefined||typeof g==="object"){return this.each(function(){if(!c.data(this,b)){c.data(this,b,new a(this,g))}})}else{if(typeof g==="string"&&g[0]!=="_"&&g!=="init"){if(g==="instance"){if(!this.length){return null}return c.data(this[0],b)}if(Array.prototype.slice.call(f,1).length==0&&c.inArray(g,c.fn[b].getters)!=-1){var e=c.data(this[0],b);return e[g].apply(e,Array.prototype.slice.call(f,1))}else{return this.each(function(){var h=c.data(this,b);if(h instanceof a&&typeof h[g]==="function"){h[g].apply(h,Array.prototype.slice.call(f,1))}})}}}};c.fn[b].getters=[]})(jQuery);